C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\build\Release\uart.o
COMPILER INVOKED BY: E:\mdkArmkeil5\C51\BIN\C51.exe .\SRC\HDL\UART.C PRINT(.\build\Release\uart.lst) OMF2 TABS(4) CODE N
                    -OCOND SYMBOLS OPTIMIZE(8,SPEED) SMALL ROM(LARGE) INCDIR(E:\mdkArmkeil5\C51\INC;.\src\user;.\src\HDL) DEFINE(__UVISION_VE
                    -RSION=526) OBJECT(.\build\Release\uart.o)

line level    source

   1          #include "reg52.H" 
   2          #include "public.h"
   3          #include "uart.h"
   4          #include "lcd.h"
   5          #include <string.h>
   6          char RecvString_buf[16];
   7          int number=0;
   8          //char HeartBeat[16]={datapackage_headflag,deviceID_1Bit,deviceID_2Bit,'_','B','e','a','t','X','X','X','X'
             -,'X','X','#'};            //ÎÒËæ±ã¶¨ÒåÁËÒ»¸öÊý¾Ý°üÓÃÀ´×ö"ÐÄÌø°ü"£¬±ÈÈçµ¥Æ¬»úÏµÍ³ÏòµçÄÔÃ¿2Ãë·¢ËÍÒ»´Î¸ÃÊý¾Ý°ü£¬Èç¹ûµçÄÔÃ»Ó
             -Ð°´Ê±½ÓÊÕµ½£¬¾ÍÈÏÎªµ¥Æ¬»úËÀµôÁË
   9          char DataPackage_DS18B20[16]={datapackage_headflag,deviceID_1Bit,deviceID_2Bit,'_','T','e','m','p','X','X'
             -,'X','X','X','X','#'};    //Õâ¸öÊÇÔø¾­ÓÃÀ´¿ØÖÆÎÂ¶È´«¸ÐÄ£¿é£¨DS18B20£©µÄÊý¾Ý°ü
  10          char DataPackage_XPT2046[16]={datapackage_headflag,deviceID_1Bit,deviceID_2Bit,'_','P','r','a','d','X','X'
             -,'X','X','X','X','#'};    //Õâ¸öÊÇÓÃÀ´¿ØÖÆ¹âÃôµç×èµÄÊý¾Ý°ü
  11          
  12          //----------------------------------------------//
  13          /*******************************
  14                      ´®¿ÚÍ¨ÐÅ
  15              MCU:89C52RC        11.0592MHz
  16          
  17          //11.0592MHz 0xd0 1200bps
  18          //12MHz 0xcc 1200bps
  19          //11.0592MHz 0xfa 9600bps
  20          //0xf4 11.0592MHz  0xf3 12MHz 4800bps
  21          //¾ùÔÚSMOD=1µÄÇé¿öÏÂ£¨²¨ÌØÂÊ±¶ÔöÄ£Ê½£©
  22          *******************************/
  23          
  24          //´®¿Ú·¢ËÍº¯Êý
  25          void PutString(unsigned char *TXStr)
  26          {
  27   1          ES=0;
  28   1           while(*TXStr!=0)
  29   1          {
  30   2              SBUF=*TXStr;
  31   2              while(TI==0);
  32   2              TI=0;
  33   2              TXStr++;
  34   2          }
  35   1          ES=1;
  36   1      }
  37          //´®¿Ú½ÓÊÕº¯Êý
  38          // 51½ÓÊÕ8266·¢ËÍÀ´µÄÊý¾Ý£¨Ä¿µÄÊÇµãµÆ£©
  39          // 8266 Ëù·¢ËÍÊý¾Ý°üÑùÀý
  40          // $01_Ligt01Off_#
  41          // $01_Ligt01On__#
  42          bit ReceiveString()
  43          {
  44   1          char * RecStr=RecvString_buf;
  45   1          char num=0;
  46   1          unsigned char count=0;
  47   1          loop:
  48   1          *RecStr=SBUF;
  49   1          if(RecvString_buf[0]!=datapackage_headflag)return 0;
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 2   

  50   1          count=0;
  51   1          RI=0;
  52   1          if(num<14)  //Êý¾Ý°ü³¤¶ÈÎª15¸ö×Ö·û,³¢ÊÔÁ¬Ðø½ÓÊÕ15¸ö×Ö·û
  53   1          {
  54   2              num++;
  55   2              RecStr++;
  56   2              while(!RI)
  57   2              {
  58   3                  // count++;
  59   3                  // if(count>130)return 0;    //½ÓÊÕÊý¾ÝµÈ´ýÑÓ³Ù£¬µÈ´ýÊ±¼äÌ«¾Ã»áµ¼ÖÂCPUÔËËãÏÐÖÃ£¬Ì«¶Ì»á³öÏÖ"Êý¾
             -Ý°ü±»·Ö¸î",Ä¬ÈÏcount=130
  60   3              }
  61   2              goto loop;
  62   2          }
  63   1          if(RecvString_buf[14]=='#'){
  64   2           PutString("\n it really has the String reveiced \n");    
  65   2           PutString(RecvString_buf);
  66   2           return 1;
  67   2          }
  68   1          
  69   1          return 0;
  70   1          
  71   1          
  72   1          
  73   1      }
  74          //¶¨Ê±Æ÷1ÓÃ×÷²¨ÌØÂÊ·¢ÉúÆ÷
  75          void Init_USART()
  76          {
  77   1          SCON=0x50;  //´®¿Ú·½Ê½1£¬Ê¹ÄÜ½ÓÊÕ
  78   1          TMOD|=0x20;  //¶¨Ê±Æ÷1¹¤×÷·½Ê½2£¨8Î»×Ô¶¯ÖØ×°³õÖµ£©
  79   1          TMOD&=~0x10;
  80   1          TH1=0xfa;   //9600bps
  81   1          TL1=0xfa;
  82   1          PCON|=0x80;  //SMOD=1
  83   1          TR1=1;
  84   1          TI=0;
  85   1          RI=0;
  86   1          //PS=1;   //Ìá¸ß´®¿ÚÖÐ¶ÏÓÅÏÈ¼¶
  87   1          ES=1;  //¿ªÆô´®¿ÚÖÐ¶ÏÊ¹ÄÜ
  88   1          EA=1;  //¿ªÖÐ¶Ï
  89   1      }
  90          //±È½ÏÖ¸ÁîÍ·²¿
  91          bit CompareCMD_head(char CMD_head[])
  92          {
  93   1          unsigned char CharNum;
  94   1          for(CharNum=0;CharNum<4;CharNum++)  //Ö¸Áî³¤¶ÈÎª10¸ö×Ö·û
  95   1          {
  96   2              if(!(RecvString_buf[CharNum+4]==CMD_head[CharNum]))
  97   2              {
  98   3                  return 0;  //Ö¸ÁîÍ·²¿Æ¥ÅäÊ§°Ü
  99   3              }
 100   2          }
 101   1          return 1;        //Ö¸ÁîÍ·²¿Æ¥Åä³É¹¦
 102   1      }
 103          //±È½ÏÖ¸ÁîÎ²²¿(start:´ÓÄÄÀï¿ªÊ¼±È½Ï£¬quality:±È½Ï¶àÉÙ¸ö×Ö·û£¬CMD_tail[]£ºÒª±È½ÏµÄ×Ö·û´®)
 104          bit CompareCMD_tail(unsigned char start,unsigned char quality,char CMD_tail[])
 105          {
 106   1          unsigned char CharNum;
 107   1          for(CharNum=0;CharNum<quality;CharNum++)
 108   1          {
 109   2              if(!(RecvString_buf[start+CharNum]==CMD_tail[CharNum]))
 110   2              {
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 3   

 111   3                  return 0;
 112   3              }
 113   2          }
 114   1          return 1;
 115   1      }
 116          bit Deal_UART_RecData()   //´¦Àí´®¿Ú½ÓÊÕÊý¾Ý°üº¯Êý£¨³É¹¦´¦ÀíÊý¾Ý°üÔò·µ»Ø1£¬·ñÔò·µ»Ø0£©
 117          {
 118   1          if(RecvString_buf[0]==datapackage_headflag && RecvString_buf[14]=='#')  //½øÐÐÊý¾Ý°üÍ·Î²±ê¼ÇÑéÖ¤
 119   1          {
 120   2              PutString("the package is right");
 121   2              switch(RecvString_buf[1])        //Ê¶±ð·¢ËÍÕßÉè±¸IDµÄµÚ1Î»Êý×Ö
 122   2              {
 123   3                  case '0':
 124   3                      switch(RecvString_buf[2])        //Ê¶±ð·¢ËÍÕßÉè±¸IDµÄµÚ2Î»Êý×Ö
 125   3                      {
 126   4                          case '1':
 127   4                              if(CompareCMD_head("Ligt"))    //ÅÐ¶ÏÖ¸ÁîÍ·²¿ÊÇ·ñÎª"Ligt"
 128   4                              {
 129   5                                  //ÏÂÃæÊÇÖ¸ÁîÎ²²¿·ÖÎö
 130   5                                  switch(RecvString_buf[8])
 131   5                                  {
 132   6                                      case '0':
 133   6                                          switch(RecvString_buf[9])
 134   6                                          {
 135   7                                              case '0':
 136   7                                                  return 0;
 137   7                                              case '1':
 138   7                                                  if(CompareCMD_tail(10,4,"Off_"))   //ÅÐ¶ÏÕû¸öÊý¾Ý°üÊÇ·ñÎª£º$01
             -_Ligt01Off_#
 139   7                                                  {
 140   8                                                      delay(100);
 141   8                                                      PutString("\nreceived right led off\n");
 142   8                                                      led = 1;
 143   8                                                      return 1;
 144   8                                                  }
 145   7                                                  if(CompareCMD_tail(10,4,"On__"))    //ÅÐ¶ÏÕû¸öÊý¾Ý°üÊÇ·ñÎª£º$0
             -1_Ligt01On__#
 146   7                                                  {
 147   8                                                      delay(100);
 148   8                                                      PutString("\nreceived right led on\n");
 149   8                                                      // unsigned int tt = 100;
 150   8                                                      // while(tt--)
 151   8                                                      led = 0;
 152   8                                                      return 1;
 153   8                                                  }
 154   7                                                  return 0;
 155   7                                              default:
 156   7                                                  return 0;
 157   7                                          }
 158   6                                      default:
 159   6                                          return 0;
 160   6                                  }
 161   5                              }
 162   4                              return 0;
 163   4      
 164   4                          default:
 165   4                              return 0;
 166   4                      }
 167   3                  default:
 168   3                      return 0;
 169   3              }
 170   2          }
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 4   

 171   1          return 0;
 172   1      }
 173          
 174          
 175          //´®¿ÚÖÐ¶Ï·þÎñº¯Êý
 176          void USART() interrupt 4   //±êÖ¾Î»TIºÍRIÐèÒªÊÖ¶¯¸´Î»£¬TIºÍRIÖÃÎ»¹²ÓÃÒ»¸öÖÐ¶ÏÈë¿Ú
 177          {
 178   1          if(ReceiveString())
 179   1          {
 180   2              //Êý¾Ý°ü³¤¶ÈÕýÈ·ÔòÖ´ÐÐÒÔÏÂ´úÂë
 181   2              if(Deal_UART_RecData());
 182   2              else
 183   2              {
 184   3                  PutString("\n error package \n");
 185   3              }
 186   2          }
 187   1          RI=0;  //½ÓÊÕ²¢´¦ÀíÒ»´ÎÊý¾Ýºó°Ñ½ÓÊÕÖÐ¶Ï±êÖ¾Çå³ýÒ»ÏÂ£¬¾Ü¾øÏìÓ¦ÔÚÖÐ¶Ï½ÓÊÕÃ¦µÄÊ±ºò·¢À´µÄÇëÇó
 188   1      }
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 5   

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION _PutString (BEGIN)
                                           ; SOURCE LINE # 25
;---- Variable 'TXStr' assigned to Register 'R1/R2/R3' ----
                                           ; SOURCE LINE # 26
                                           ; SOURCE LINE # 27
0000 C2AC              CLR     ES
0002         ?C0001:
                                           ; SOURCE LINE # 28
0002 120000      E     LCALL   ?C?CLDPTR
0005 6010              JZ      ?C0002
                                           ; SOURCE LINE # 29
                                           ; SOURCE LINE # 30
0007 F599              MOV     SBUF,A
0009         ?C0003:
                                           ; SOURCE LINE # 31
0009 3099FD            JNB     TI,?C0003
                                           ; SOURCE LINE # 32
000C C299              CLR     TI
                                           ; SOURCE LINE # 33
000E 7401              MOV     A,#01H
0010 29                ADD     A,R1
0011 F9                MOV     R1,A
0012 E4                CLR     A
0013 3A                ADDC    A,R2
0014 FA                MOV     R2,A
                                           ; SOURCE LINE # 34
0015 80EB              SJMP    ?C0001
0017         ?C0002:
                                           ; SOURCE LINE # 35
0017 D2AC              SETB    ES
                                           ; SOURCE LINE # 36
0019 22                RET     
             ; FUNCTION _PutString (END)

             ; FUNCTION ReceiveString (BEGIN)
                                           ; SOURCE LINE # 42
                                           ; SOURCE LINE # 43
                                           ; SOURCE LINE # 44
0000 7B00              MOV     R3,#00H
0002 7A00        R     MOV     R2,#HIGH RecvString_buf
0004 7900        R     MOV     R1,#LOW RecvString_buf
;---- Variable 'RecStr' assigned to Register 'R1/R2/R3' ----
                                           ; SOURCE LINE # 45
;---- Variable 'num' assigned to Register 'R7' ----
0006 E4                CLR     A
0007 FF                MOV     R7,A
                                           ; SOURCE LINE # 46
;---- Variable 'count' assigned to Register 'R6' ----
                                           ; SOURCE LINE # 47
0008         loop:
                                           ; SOURCE LINE # 48
0008 E599              MOV     A,SBUF
000A 120000      E     LCALL   ?C?CSTPTR
                                           ; SOURCE LINE # 49
000D E500        R     MOV     A,RecvString_buf
000F 6424              XRL     A,#024H
0011 6002              JZ      ?C0007
0013 C3                CLR     C
0014 22                RET     
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 6   

0015         ?C0007:
                                           ; SOURCE LINE # 50
0015 E4                CLR     A
0016 FE                MOV     R6,A
                                           ; SOURCE LINE # 51
0017 C298              CLR     RI
                                           ; SOURCE LINE # 52
0019 C3                CLR     C
001A EF                MOV     A,R7
001B 6480              XRL     A,#080H
001D 948E              SUBB    A,#08EH
001F 500D              JNC     ?C0009
                                           ; SOURCE LINE # 53
                                           ; SOURCE LINE # 54
0021 0F                INC     R7
                                           ; SOURCE LINE # 55
0022 7401              MOV     A,#01H
0024 29                ADD     A,R1
0025 F9                MOV     R1,A
0026 E4                CLR     A
0027 3A                ADDC    A,R2
0028 FA                MOV     R2,A
0029         ?C0010:
                                           ; SOURCE LINE # 56
0029 2098DC            JB      RI,loop
                                           ; SOURCE LINE # 57
                                           ; SOURCE LINE # 60
002C 80FB              SJMP    ?C0010
                                           ; SOURCE LINE # 61
                                           ; SOURCE LINE # 62
002E         ?C0009:
                                           ; SOURCE LINE # 63
002E E500        R     MOV     A,RecvString_buf+0EH
0030 B42314            CJNE    A,#023H,?C0012
                                           ; SOURCE LINE # 64
0033 7BFF              MOV     R3,#0FFH
0035 7A00        R     MOV     R2,#HIGH ?SC_0
0037 7900        R     MOV     R1,#LOW ?SC_0
0039 120000      R     LCALL   _PutString
                                           ; SOURCE LINE # 65
003C 7B00              MOV     R3,#00H
003E 7A00        R     MOV     R2,#HIGH RecvString_buf
0040 7900        R     MOV     R1,#LOW RecvString_buf
0042 120000      R     LCALL   _PutString
                                           ; SOURCE LINE # 66
0045 D3                SETB    C
0046 22                RET     
                                           ; SOURCE LINE # 67
0047         ?C0012:
                                           ; SOURCE LINE # 69
0047 C3                CLR     C
                                           ; SOURCE LINE # 73
0048         ?C0008:
0048 22                RET     
             ; FUNCTION ReceiveString (END)

             ; FUNCTION Init_USART (BEGIN)
                                           ; SOURCE LINE # 75
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
0000 759850            MOV     SCON,#050H
                                           ; SOURCE LINE # 78
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 7   

0003 438920            ORL     TMOD,#020H
                                           ; SOURCE LINE # 79
0006 5389EF            ANL     TMOD,#0EFH
                                           ; SOURCE LINE # 80
0009 758DFA            MOV     TH1,#0FAH
                                           ; SOURCE LINE # 81
000C 758BFA            MOV     TL1,#0FAH
                                           ; SOURCE LINE # 82
000F 438780            ORL     PCON,#080H
                                           ; SOURCE LINE # 83
0012 D28E              SETB    TR1
                                           ; SOURCE LINE # 84
0014 C299              CLR     TI
                                           ; SOURCE LINE # 85
0016 C298              CLR     RI
                                           ; SOURCE LINE # 87
0018 D2AC              SETB    ES
                                           ; SOURCE LINE # 88
001A D2AF              SETB    EA
                                           ; SOURCE LINE # 89
001C 22                RET     
             ; FUNCTION Init_USART (END)

             ; FUNCTION _CompareCMD_head (BEGIN)
                                           ; SOURCE LINE # 91
0000 8B00        R     MOV     CMD_head,R3
0002 8A00        R     MOV     CMD_head+01H,R2
0004 8900        R     MOV     CMD_head+02H,R1
                                           ; SOURCE LINE # 92
                                           ; SOURCE LINE # 94
;---- Variable 'CharNum' assigned to Register 'R7' ----
0006 E4                CLR     A
0007 FF                MOV     R7,A
0008         ?C0014:
                                           ; SOURCE LINE # 95
                                           ; SOURCE LINE # 96
0008 AB00        R     MOV     R3,CMD_head
000A AA00        R     MOV     R2,CMD_head+01H
000C A900        R     MOV     R1,CMD_head+02H
000E 8F82              MOV     DPL,R7
0010 758300            MOV     DPH,#00H
0013 120000      E     LCALL   ?C?CLDOPTR
0016 FE                MOV     R6,A
0017 7400        R     MOV     A,#LOW RecvString_buf+04H
0019 2F                ADD     A,R7
001A F8                MOV     R0,A
001B E6                MOV     A,@R0
001C B50603            CJNE    A,AR6,?C0018
001F D3                SETB    C
0020 8001              SJMP    ?C0019
0022         ?C0018:
0022 C3                CLR     C
0023         ?C0019:
0023 4001              JC      ?C0016
                                           ; SOURCE LINE # 97
                                           ; SOURCE LINE # 98
0025 22                RET     
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 100
0026         ?C0016:
0026 0F                INC     R7
0027 BF04DE            CJNE    R7,#04H,?C0014
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 8   

002A         ?C0015:
                                           ; SOURCE LINE # 101
002A D3                SETB    C
                                           ; SOURCE LINE # 102
002B         ?C0020:
002B 22                RET     
             ; FUNCTION _CompareCMD_head (END)

             ; FUNCTION L?0050 (BEGIN)
0000 7BFF              MOV     R3,#0FFH
0002 7D04              MOV     R5,#04H
0004 7F0A              MOV     R7,#0AH
             ; FUNCTION _CompareCMD_tail (BEGIN)
                                           ; SOURCE LINE # 104
0006 8F00        R     MOV     start,R7
0008 8B00        R     MOV     CMD_tail,R3
000A 8A00        R     MOV     CMD_tail+01H,R2
000C 8900        R     MOV     CMD_tail+02H,R1
;---- Variable 'quality' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 105
                                           ; SOURCE LINE # 107
;---- Variable 'CharNum' assigned to Register 'R7' ----
000E E4                CLR     A
000F FF                MOV     R7,A
0010         ?C0021:
0010 EF                MOV     A,R7
0011 C3                CLR     C
0012 9D                SUBB    A,R5
0013 5023              JNC     ?C0022
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
0015 AB00        R     MOV     R3,CMD_tail
0017 AA00        R     MOV     R2,CMD_tail+01H
0019 A900        R     MOV     R1,CMD_tail+02H
001B 8F82              MOV     DPL,R7
001D 758300            MOV     DPH,#00H
0020 120000      E     LCALL   ?C?CLDOPTR
0023 FE                MOV     R6,A
0024 E500        R     MOV     A,start
0026 2F                ADD     A,R7
0027 2400        R     ADD     A,#LOW RecvString_buf
0029 F8                MOV     R0,A
002A E6                MOV     A,@R0
002B B50603            CJNE    A,AR6,?C0025
002E D3                SETB    C
002F 8001              SJMP    ?C0026
0031         ?C0025:
0031 C3                CLR     C
0032         ?C0026:
0032 4001              JC      ?C0023
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
0034 22                RET     
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 113
0035         ?C0023:
0035 0F                INC     R7
0036 80D8              SJMP    ?C0021
0038         ?C0022:
                                           ; SOURCE LINE # 114
0038 D3                SETB    C
                                           ; SOURCE LINE # 115
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 9   

0039         ?C0027:
0039 22                RET     
             ; FUNCTION _CompareCMD_tail (END)

             ; FUNCTION Deal_UART_RecData (BEGIN)
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
                                           ; SOURCE LINE # 118
0000 E500        R     MOV     A,RecvString_buf
0002 6424              XRL     A,#024H
0004 7079              JNZ     ?C0028
0006 E500        R     MOV     A,RecvString_buf+0EH
0008 6423              XRL     A,#023H
000A 7073              JNZ     ?C0028
                                           ; SOURCE LINE # 119
                                           ; SOURCE LINE # 120
000C 7BFF              MOV     R3,#0FFH
000E 7A00        R     MOV     R2,#HIGH ?SC_38
0010 7900        R     MOV     R1,#LOW ?SC_38
0012 120000      R     LCALL   _PutString
                                           ; SOURCE LINE # 121
0015 E500        R     MOV     A,RecvString_buf+01H
0017 24D0              ADD     A,#0D0H
0019 7062              JNZ     ?C0045
                                           ; SOURCE LINE # 122
                                           ; SOURCE LINE # 123
001B         ?C0030:
                                           ; SOURCE LINE # 124
001B E500        R     MOV     A,RecvString_buf+02H
001D 24CF              ADD     A,#0CFH
001F 705A              JNZ     ?C0044
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 126
0021         ?C0032:
                                           ; SOURCE LINE # 127
0021 7BFF              MOV     R3,#0FFH
0023 7A00        R     MOV     R2,#HIGH ?SC_59
0025 7900        R     MOV     R1,#LOW ?SC_59
0027 120000      R     LCALL   _CompareCMD_head
002A 504D              JNC     ?C0033
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 130
002C E500        R     MOV     A,RecvString_buf+08H
002E 24D0              ADD     A,#0D0H
0030 7045              JNZ     ?C0043
                                           ; SOURCE LINE # 131
                                           ; SOURCE LINE # 132
0032         ?C0035:
                                           ; SOURCE LINE # 133
0032 E500        R     MOV     A,RecvString_buf+09H
0034 24CF              ADD     A,#0CFH
0036 6003              JZ      ?C0039
0038 04                INC     A
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
0039         ?C0037:
                                           ; SOURCE LINE # 136
0039 C3                CLR     C
003A 22                RET     
                                           ; SOURCE LINE # 137
003B         ?C0039:
                                           ; SOURCE LINE # 138
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 10  

003B 7A00        R     MOV     R2,#HIGH ?SC_64
003D 7900        R     MOV     R1,#LOW ?SC_64
003F 120000      R     LCALL   L?0050
0042 5014              JNC     ?C0040
                                           ; SOURCE LINE # 139
                                           ; SOURCE LINE # 140
0044 7F64              MOV     R7,#064H
0046 7E00              MOV     R6,#00H
0048 120000      E     LCALL   _delay
                                           ; SOURCE LINE # 141
004B 7BFF              MOV     R3,#0FFH
004D 7A00        R     MOV     R2,#HIGH ?SC_69
004F 7900        R     MOV     R1,#LOW ?SC_69
0051 120000      R     LCALL   _PutString
                                           ; SOURCE LINE # 142
0054 D2A1              SETB    led
                                           ; SOURCE LINE # 143
0056 D3                SETB    C
0057 22                RET     
                                           ; SOURCE LINE # 144
0058         ?C0040:
                                           ; SOURCE LINE # 145
0058 7A00        R     MOV     R2,#HIGH ?SC_94
005A 7900        R     MOV     R1,#LOW ?SC_94
005C 120000      R     LCALL   L?0050
005F 5014              JNC     ?C0041
                                           ; SOURCE LINE # 146
                                           ; SOURCE LINE # 147
0061 7F64              MOV     R7,#064H
0063 7E00              MOV     R6,#00H
0065 120000      E     LCALL   _delay
                                           ; SOURCE LINE # 148
0068 7BFF              MOV     R3,#0FFH
006A 7A00        R     MOV     R2,#HIGH ?SC_99
006C 7900        R     MOV     R1,#LOW ?SC_99
006E 120000      R     LCALL   _PutString
                                           ; SOURCE LINE # 151
0071 C2A1              CLR     led
                                           ; SOURCE LINE # 152
0073 D3                SETB    C
0074 22                RET     
                                           ; SOURCE LINE # 153
0075         ?C0041:
                                           ; SOURCE LINE # 154
0075 C3                CLR     C
0076 22                RET     
                                           ; SOURCE LINE # 155
                                           ; SOURCE LINE # 157
                                           ; SOURCE LINE # 158
0077         ?C0043:
                                           ; SOURCE LINE # 159
0077 C3                CLR     C
0078 22                RET     
                                           ; SOURCE LINE # 160
                                           ; SOURCE LINE # 161
0079         ?C0033:
                                           ; SOURCE LINE # 162
0079 C3                CLR     C
007A 22                RET     
                                           ; SOURCE LINE # 164
007B         ?C0044:
                                           ; SOURCE LINE # 165
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 11  

007B C3                CLR     C
007C 22                RET     
                                           ; SOURCE LINE # 166
                                           ; SOURCE LINE # 167
007D         ?C0045:
                                           ; SOURCE LINE # 168
007D C3                CLR     C
007E 22                RET     
                                           ; SOURCE LINE # 169
                                           ; SOURCE LINE # 170
007F         ?C0028:
                                           ; SOURCE LINE # 171
007F C3                CLR     C
                                           ; SOURCE LINE # 172
0080         ?C0038:
0080 22                RET     
             ; FUNCTION Deal_UART_RecData (END)

             ; FUNCTION USART (BEGIN)
0000 C0E0              PUSH    ACC
0002 C0F0              PUSH    B
0004 C083              PUSH    DPH
0006 C082              PUSH    DPL
0008 C0D0              PUSH    PSW
000A 75D000            MOV     PSW,#00H
000D C000              PUSH    AR0
000F C001              PUSH    AR1
0011 C002              PUSH    AR2
0013 C003              PUSH    AR3
0015 C004              PUSH    AR4
0017 C005              PUSH    AR5
0019 C006              PUSH    AR6
001B C007              PUSH    AR7
                                           ; SOURCE LINE # 176
                                           ; SOURCE LINE # 178
001D 120000      R     LCALL   ReceiveString
0020 500E              JNC     ?C0046
                                           ; SOURCE LINE # 179
                                           ; SOURCE LINE # 181
0022 120000      R     LCALL   Deal_UART_RecData
0025 4009              JC      ?C0046
                                           ; SOURCE LINE # 183
                                           ; SOURCE LINE # 184
0027 7BFF              MOV     R3,#0FFH
0029 7A00        R     MOV     R2,#HIGH ?SC_123
002B 7900        R     MOV     R1,#LOW ?SC_123
002D 120000      R     LCALL   _PutString
                                           ; SOURCE LINE # 185
                                           ; SOURCE LINE # 186
0030         ?C0046:
                                           ; SOURCE LINE # 187
0030 C298              CLR     RI
                                           ; SOURCE LINE # 188
0032 D007              POP     AR7
0034 D006              POP     AR6
0036 D005              POP     AR5
0038 D004              POP     AR4
003A D003              POP     AR3
003C D002              POP     AR2
003E D001              POP     AR1
0040 D000              POP     AR0
0042 D0D0              POP     PSW
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 12  

0044 D082              POP     DPL
0046 D083              POP     DPH
0048 D0F0              POP     B
004A D0E0              POP     ACC
004C 32                RETI    
             ; FUNCTION USART (END)

C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 13  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


P0 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0080H  1
P1 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0090H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
T0 . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B4H  1
AC . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D6H  1
T1 . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B5H  1
T2 . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0090H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
Init_USART . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
number . . . . . . . . . . . . . . . .  PUBLIC   DATA   INT      0000H  2
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
Deal_UART_RecData. . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
USART. . . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
_delay . . . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_CompareCMD_head . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  CMD_head . . . . . . . . . . . . . .  AUTO     DATA   PTR      0000H  3
  CharNum. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
EXF2 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00CEH  1
RD . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B7H  1
ES . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ACH  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
RI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0098H  1
INT0 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B2H  1
CY . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D7H  1
TI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0099H  1
INT1 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B3H  1
RCAP2H . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00CBH  1
PS . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00BCH  1
SP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0081H  1
LCD1602_RS . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A6H  1
T2EX . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0091H  1
OV . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D2H  1
RCAP2L . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00CAH  1
LCD1602_RW . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A5H  1
C_T2 . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C9H  1
WR . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B6H  1
RecvString_buf . . . . . . . . . . . .  PUBLIC   DATA   ARRAY    0002H  16
RCLK . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00CDH  1
_CompareCMD_tail . . . . . . . . . . .  PUBLIC   CODE   PROC     0006H  -----
  start. . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  quality. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0005H  1
  CMD_tail . . . . . . . . . . . . . .  AUTO     DATA   PTR      0001H  3
  CharNum. . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
TCLK . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00CCH  1
SBUF . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0099H  1
PCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0087H  1
DataPackage_DS18B20. . . . . . . . . .  PUBLIC   DATA   ARRAY    0012H  16
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
TMOD . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0089H  1
TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
_PutString . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  TXStr. . . . . . . . . . . . . . . .  * REG *  DATA   PTR      0001H  3
led. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A1H  1
IE0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0089H  1
IE1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008BH  1
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 14  

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


B. . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F0H  1
LCD1602_E. . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A7H  1
ReceiveString. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  RecStr . . . . . . . . . . . . . . .  * REG *  DATA   PTR      0001H  3
  num. . . . . . . . . . . . . . . . .  * REG *  DATA   CHAR     0007H  1
  count. . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0006H  1
  loop . . . . . . . . . . . . . . . .  LABEL    CODE   LABEL    -----  -----
CP_RL2 . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00C8H  1
ACC. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E0H  1
ET0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A9H  1
ET1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ABH  1
TF0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008DH  1
ET2. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ADH  1
TF1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008FH  1
TF2. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00CFH  1
RB8. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009AH  1
TH0. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008CH  1
EX0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A8H  1
IT0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0088H  1
TH1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008DH  1
TB8. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009BH  1
EX1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AAH  1
IT1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008AH  1
TH2. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00CDH  1
P. . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D0H  1
SM0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009FH  1
TL0. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008AH  1
SM1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009EH  1
TL1. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   008BH  1
SM2. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009DH  1
TL2. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00CCH  1
PT0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B9H  1
PT1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00BBH  1
RS0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D3H  1
PT2. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00BDH  1
TR0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008CH  1
RS1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D4H  1
TR1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      008EH  1
DataPackage_XPT2046. . . . . . . . . .  PUBLIC   DATA   ARRAY    0022H  16
TR2. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00CAH  1
PX0. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B8H  1
PX1. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00BAH  1
DPH. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0083H  1
LSA. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A2H  1
DPL. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0082H  1
LSB. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A3H  1
LSC. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00A4H  1
EXEN2. . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00CBH  1
REN. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009CH  1
T2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
RXD. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B0H  1
TXD. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B1H  1
F0 . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D5H  1
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    439    ----
C51 COMPILER V9.57.0.0   UART                                                              06/01/2021 16:27:12 PAGE 15  

   CONSTANT SIZE    =    141    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     50       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
